# ============================================================================
# Jarvis Â· Logrotate-Konfiguration
# ============================================================================
# Installation:
#   sudo cp deploy/jarvis-logrotate.conf /etc/logrotate.d/jarvis
#   Oder: Symlink von ~/.jarvis/logrotate.d/jarvis
# ============================================================================

/home/*/.jarvis/logs/*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    dateext
    dateformat -%Y-%m-%d
    create 0640
    sharedscripts
    postrotate
        systemctl --user reload jarvis 2>/dev/null || true
    endscript
}

/home/*/.jarvis/logs/*.jsonl {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    dateext
    dateformat -%Y-%m-%d
    create 0640
}

/home/*/.jarvis/logs/audit*.jsonl {
    weekly
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    dateext
    dateformat -%Y-%m-%d
    create 0640
}
